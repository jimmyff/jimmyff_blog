<!doctype html><html lang=en-gb>
<head>
<title>Painting asteroids | jimmyff</title>
<meta charset=utf-8>
<meta name=language content="en">
<meta name=description content>
<meta name=keywords content>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<link rel="shortcut icon" type=image/png href=/favicon.ico>
<link type=text/css rel=stylesheet href=/css/post.min.86d1effd4c412b85ac13db53a90c473a0f256f789b821e131125c9aa25cb6a6d.css integrity="sha256-htHv/UxBK4WsE9tTqQxHOg8lb3ibgh4TESXJqiXLam0=">
<link type=text/css rel=stylesheet href=/css/custom.min.495445777598dcf5d797226bddced870752367a6ae14b1d3d2018953cf1060bb.css integrity="sha256-SVRFd3WY3PXXlyJr3c7YcHUjZ6auFLHT0gGJU88QYLs=">
<script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/jimmyff.github.io\/"},"articleSection":"blog","name":"Painting asteroids","headline":"Painting asteroids","description":"","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2021","datePublished":"2021-07-16 00:00:00 \u002b0000 UTC","dateModified":"2021-07-16 00:00:00 \u002b0000 UTC","url":"https:\/\/jimmyff.github.io\/blog\/2021-07-16-painting-asteroids\/","wordCount":"433","keywords":["Blog"]}</script>
</head>
<body>
<div class=burger__container>
<div class=burger aria-controls=navigation aria-label=Menu>
<div class="burger__meat burger__meat--1"></div>
<div class="burger__meat burger__meat--2"></div>
<div class="burger__meat burger__meat--3"></div>
</div>
</div>
<nav class=nav id=navigation>
<ul class=nav__list>
<li>
<a href=/>jimmyff</a>
</li>
<li>
<a class=active href=/blog>blog</a>
</li>
<li>
<a href=/art>gallery</a>
</li>
</ul>
</nav>
<main>
<div class=flex-wrapper>
<div class=post__container>
<div class=post>
<header class=post__header>
<h1 id=post__title>Painting asteroids</h1>
<time datetime="2021-07-16 00:00:00 +0000 UTC" class=post__date>Jul 16 2021</time>
</header>
<article class=post__content>
<p>I&rsquo;ve been stewing on how I could fill the asteroids to make my <a href=/tags/space_game/>space game</a> look better. It&rsquo;s a tricky problem as I only know terrain lines and nothing else (so I don&rsquo;t know which side is supposed to be solid and which is supposed to be the empty void of space). This shows what I have and what I want to achieve:</p>
<p><img src=problem.webp alt=WEBP title="The problem"></p>
<p>I can trust that the space ship will always be in space (even if it&rsquo;s hit an asteroid, it should never actually be in the asteroid!). Using that piece of truth I&rsquo;ve came up with an idea, if I projected from the ship to the corners and count the terrain line intersections I should be able to figure out what&rsquo;s solid. If the number of intersections is even, I know the corner should be in also in space, if the intersection count was odd, then the corner is in an asteroid.</p>
<p><img src=possible_solution.webp alt=WEBP title="Possible solution"></p>
<p>Once I knew if the corners were in an asteroid or not, I should then be able to move along each edge and join up the lines.</p>
<h2 id=implementation>Implementation<a class=anchor href=#implementation>#</a></h2>
<p><img src=1-corners.gif alt=GIF title="Implementing the intersection counting"></p>
<p>I&rsquo;ve implemented the intersection counting, if the line is green then there is an even number of intersections which means the corner is in space, if red then there is an odd number of intersections so this is in the asteroid.</p>
<p>I&rsquo;ve cut the terrain line at the scren edge (and highlighting it with a circle), this is so I can make a nice clean edge on each polygon.</p>
<p>(Oh you might also notice I&rsquo;ve implemented asteroid rotation too!)</p>
<p><img src=2-triangulate.gif alt=GIF title="Implementing the intersection counting"></p>
<p>Here I have implemented the algorithm that combines all the edges in to polygons. At the top there is text that says something like &lsquo;P: 2&rsquo;, this means 2 polygons found.</p>
<p>At first I was getting a weird graphical glitch when filling my polygons which I realised was due to the fact my polygons are concave. Filling concave polygons turns out is a technically tricky as the polygon needed triangulating (chopping in to simple triangles). Lucikly Love2d has a triangulate feature that I could use. I coloured the traingles random colours to highlight the trignulation process.</p>
<p><img src=3-done.gif alt=GIF title="Implementing the intersection counting"></p>
<p>&mldr;ta-dah! Here is the finished product. I&rsquo;m super happy (& surprised) that my crazy idea worked!</p>
<p>I now need to reimplement the ship, but I&rsquo;m a little hesitant to continue with Lua due to it being so difficult to debug (and I&rsquo;m really missing static-typing!). I&rsquo;m thinking about switching to C or possibly Rust to continue my playdate journey.</p>
<p>I apologise for the noisy strangely coloured gif&rsquo;s -I really need to level up by gif skills!</p>
</article>
<ul class=tags__list>
<li class=tag__item>
<a class=tag__link href=https://jimmyff.github.io/tags/gamedev/>gamedev</a>
</li>
<li class=tag__item>
<a class=tag__link href=https://jimmyff.github.io/tags/playdate/>playdate</a>
</li>
<li class=tag__item>
<a class=tag__link href=https://jimmyff.github.io/tags/lua/>lua</a>
</li>
<li class=tag__item>
<a class=tag__link href=https://jimmyff.github.io/tags/space_game/>space_game</a>
</li></ul>
<div class=pagination>
<a class=pagination__item href=https://jimmyff.github.io/blog/2018-06-25-building-a-web-app-the-progressive-way/>
<span class=pagination__label>Previous Post</span>
<span class=pagination__title>Building a web app, the progressive way</span>
</a>
<a class=pagination__item href=https://jimmyff.github.io/blog/2021-07-22-crypto-clock/>
<span class=pagination__label>Next Post</span>
<span class=pagination__title>Crypto Clock - the crypto currency ticker that runs on an old Kindle</span>
</a>
</div>
<footer class=post__footer>
<div class=social-icons>
<a class=social-icons__link title=GitHub href=https://github.com/jimmyff target=_blank rel="me noopener">
<div class=social-icons__icon style=background-image:url(https://jimmyff.github.io/svg/github.svg)></div>
</a>
</div>
<p>Â© 2021</p>
</footer>
</div>
</div>
</div>
</main>
<script src=/js/index.min.575dda8d49ee02639942c63564273e6da972ab531dda26a08800bdcb477cbd7f.js integrity="sha256-V13ajUnuAmOZQsY1ZCc+balyq1Md2iagiAC9y0d8vX8=" crossorigin=anonymous></script>
<script src=https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js></script>
<script src=https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js data-autoloader-path=https://unpkg.com/prismjs@1.20.0/components/></script>
</body>
</html>