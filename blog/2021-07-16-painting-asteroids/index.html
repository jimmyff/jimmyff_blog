<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Painting asteroids | jimmyff</title><meta name=keywords content="gamedev,playdate,lua,space_game"><meta name=description content="I&rsquo;ve been stewing on how I could fill the asteroids to make my space game look better. It&rsquo;s a tricky problem as I only know terrain lines and nothing else (so I don&rsquo;t know which side is supposed to be solid and which is supposed to be the empty void of space). This shows what I have and what I want to achieve:
I can trust that the space ship will always be in space (even if it&rsquo;s hit an asteroid, it should never actually be in the asteroid!"><meta name=author content><link rel=canonical href=https://www.jimmyff.co.uk/blog/2021-07-16-painting-asteroids/><link crossorigin=anonymous href=/assets/css/stylesheet.ceade966d9739841f96b33abaa2bbdfb71b182a35414c555c1a8042c250c4269.css integrity="sha256-zq3pZtlzmEH5azOrqiu9+3GxgqNUFMVVwagELCUMQmk=" rel="preload stylesheet" as=style><link rel=icon href=https://www.jimmyff.co.uk/images/rainbow.png><link rel=icon type=image/png sizes=16x16 href=https://www.jimmyff.co.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.jimmyff.co.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://www.jimmyff.co.uk/apple-touch-icon.png><link rel=mask-icon href=https://www.jimmyff.co.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-71ZN1D4H6Q"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-71ZN1D4H6Q",{anonymize_ip:!1})}</script><meta property="og:title" content="Painting asteroids"><meta property="og:description" content="I&rsquo;ve been stewing on how I could fill the asteroids to make my space game look better. It&rsquo;s a tricky problem as I only know terrain lines and nothing else (so I don&rsquo;t know which side is supposed to be solid and which is supposed to be the empty void of space). This shows what I have and what I want to achieve:
I can trust that the space ship will always be in space (even if it&rsquo;s hit an asteroid, it should never actually be in the asteroid!"><meta property="og:type" content="article"><meta property="og:url" content="https://www.jimmyff.co.uk/blog/2021-07-16-painting-asteroids/"><meta property="og:image" content="https://www.jimmyff.co.uk/papermod-cover.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-07-16T00:00:00+00:00"><meta property="article:modified_time" content="2021-07-16T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.jimmyff.co.uk/papermod-cover.png"><meta name=twitter:title content="Painting asteroids"><meta name=twitter:description content="I&rsquo;ve been stewing on how I could fill the asteroids to make my space game look better. It&rsquo;s a tricky problem as I only know terrain lines and nothing else (so I don&rsquo;t know which side is supposed to be solid and which is supposed to be the empty void of space). This shows what I have and what I want to achieve:
I can trust that the space ship will always be in space (even if it&rsquo;s hit an asteroid, it should never actually be in the asteroid!"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://www.jimmyff.co.uk/blog/"},{"@type":"ListItem","position":2,"name":"Painting asteroids","item":"https://www.jimmyff.co.uk/blog/2021-07-16-painting-asteroids/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Painting asteroids","name":"Painting asteroids","description":"I\u0026rsquo;ve been stewing on how I could fill the asteroids to make my space game look better. It\u0026rsquo;s a tricky problem as I only know terrain lines and nothing else (so I don\u0026rsquo;t know which side is supposed to be solid and which is supposed to be the empty void of space). This shows what I have and what I want to achieve:\nI can trust that the space ship will always be in space (even if it\u0026rsquo;s hit an asteroid, it should never actually be in the asteroid!","keywords":["gamedev","playdate","lua","space_game"],"articleBody":"I’ve been stewing on how I could fill the asteroids to make my space game look better. It’s a tricky problem as I only know terrain lines and nothing else (so I don’t know which side is supposed to be solid and which is supposed to be the empty void of space). This shows what I have and what I want to achieve:\nI can trust that the space ship will always be in space (even if it’s hit an asteroid, it should never actually be in the asteroid!). Using that piece of truth I’ve came up with an idea, if I projected from the ship to the corners and count the terrain line intersections I should be able to figure out what’s solid. If the number of intersections is even, I know the corner should be in also in space, if the intersection count was odd, then the corner is in an asteroid.\nOnce I knew if the corners were in an asteroid or not, I should then be able to move along each edge and join up the lines.\nImplementation I’ve implemented the intersection counting, if the line is green then there is an even number of intersections which means the corner is in space, if red then there is an odd number of intersections so this is in the asteroid.\nI’ve cut the terrain line at the scren edge (and highlighting it with a circle), this is so I can make a nice clean edge on each polygon.\n(Oh you might also notice I’ve implemented asteroid rotation too!)\nHere I have implemented the algorithm that combines all the edges in to polygons. At the top there is text that says something like ‘P: 2’, this means 2 polygons found.\nAt first I was getting a weird graphical glitch when filling my polygons which I realised was due to the fact my polygons are concave. Filling concave polygons turns out is a technically tricky as the polygon needed triangulating (chopping in to simple triangles). Lucikly Love2d has a triangulate feature that I could use. I coloured the traingles random colours to highlight the trignulation process.\n…ta-dah! Here is the finished product. I’m super happy (\u0026 surprised) that my crazy idea worked!\nI now need to reimplement the ship, but I’m a little hesitant to continue with Lua due to it being so difficult to debug (and I’m really missing static-typing!). I’m thinking about switching to C or possibly Rust to continue my playdate journey.\nI apologise for the noisy strangely coloured gif’s -I really need to level up by gif skills!\n","wordCount":"433","inLanguage":"en","datePublished":"2021-07-16T00:00:00Z","dateModified":"2021-07-16T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.jimmyff.co.uk/blog/2021-07-16-painting-asteroids/"},"publisher":{"@type":"Organization","name":"jimmyff","logo":{"@type":"ImageObject","url":"https://www.jimmyff.co.uk/images/rainbow.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.jimmyff.co.uk/ accesskey=h title="jimmyff (Alt + H)"><img src=https://www.jimmyff.co.uk/images/rainbow.png alt aria-label=logo height=24>jimmyff</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.jimmyff.co.uk/blog/ title=blog><span>blog</span></a></li><li><a href=https://www.jimmyff.co.uk/art/ title=gallery><span>gallery</span></a></li><li><a href=https://www.jimmyff.co.uk/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.jimmyff.co.uk/>Home</a>&nbsp;»&nbsp;<a href=https://www.jimmyff.co.uk/blog/>Blog</a></div><h1 class=post-title>Painting asteroids</h1><div class=post-meta><span title='2021-07-16 00:00:00 +0000 UTC'>July 16, 2021</span></div></header><div class=post-content><p>I&rsquo;ve been stewing on how I could fill the asteroids to make my <a href=/tags/space_game/>space game</a> look better. It&rsquo;s a tricky problem as I only know terrain lines and nothing else (so I don&rsquo;t know which side is supposed to be solid and which is supposed to be the empty void of space). This shows what I have and what I want to achieve:</p><p><img loading=lazy src=problem.webp alt=WEBP title="The problem"></p><p>I can trust that the space ship will always be in space (even if it&rsquo;s hit an asteroid, it should never actually be in the asteroid!). Using that piece of truth I&rsquo;ve came up with an idea, if I projected from the ship to the corners and count the terrain line intersections I should be able to figure out what&rsquo;s solid. If the number of intersections is even, I know the corner should be in also in space, if the intersection count was odd, then the corner is in an asteroid.</p><p><img loading=lazy src=possible_solution.webp alt=WEBP title="Possible solution"></p><p>Once I knew if the corners were in an asteroid or not, I should then be able to move along each edge and join up the lines.</p><h2 id=implementation>Implementation<a hidden class=anchor aria-hidden=true href=#implementation>#</a></h2><p><img loading=lazy src=1-corners.gif alt=GIF title="Implementing the intersection counting"></p><p>I&rsquo;ve implemented the intersection counting, if the line is green then there is an even number of intersections which means the corner is in space, if red then there is an odd number of intersections so this is in the asteroid.</p><p>I&rsquo;ve cut the terrain line at the scren edge (and highlighting it with a circle), this is so I can make a nice clean edge on each polygon.</p><p>(Oh you might also notice I&rsquo;ve implemented asteroid rotation too!)</p><p><img loading=lazy src=2-triangulate.gif alt=GIF title="Implementing the intersection counting"></p><p>Here I have implemented the algorithm that combines all the edges in to polygons. At the top there is text that says something like &lsquo;P: 2&rsquo;, this means 2 polygons found.</p><p>At first I was getting a weird graphical glitch when filling my polygons which I realised was due to the fact my polygons are concave. Filling concave polygons turns out is a technically tricky as the polygon needed triangulating (chopping in to simple triangles). Lucikly Love2d has a triangulate feature that I could use. I coloured the traingles random colours to highlight the trignulation process.</p><p><img loading=lazy src=3-done.gif alt=GIF title="Implementing the intersection counting"></p><p>&mldr;ta-dah! Here is the finished product. I&rsquo;m super happy (& surprised) that my crazy idea worked!</p><p>I now need to reimplement the ship, but I&rsquo;m a little hesitant to continue with Lua due to it being so difficult to debug (and I&rsquo;m really missing static-typing!). I&rsquo;m thinking about switching to C or possibly Rust to continue my playdate journey.</p><p>I apologise for the noisy strangely coloured gif&rsquo;s -I really need to level up by gif skills!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.jimmyff.co.uk/tags/gamedev/>gamedev</a></li><li><a href=https://www.jimmyff.co.uk/tags/playdate/>playdate</a></li><li><a href=https://www.jimmyff.co.uk/tags/lua/>lua</a></li><li><a href=https://www.jimmyff.co.uk/tags/space_game/>space_game</a></li></ul><nav class=paginav><a class=prev href=https://www.jimmyff.co.uk/blog/2021-07-22-crypto-clock/><span class=title>« Prev</span><br><span>Crypto Clock - the crypto currency ticker that runs on an old Kindle</span></a>
<a class=next href=https://www.jimmyff.co.uk/blog/2020-12-21-eurovision-game-2-the-card-game/><span class=title>Next »</span><br><span>Eurovision game 2.0 - The card game!</span></a></nav></footer></article></main><footer class=footer><span>© Jimmy Forrester-Fellowes</span><ul id=footer_menu><li><a href=https://www.jimmyff.co.uk/archives title=Archive><span>Archive</span></a></li><li><a href=https://www.jimmyff.co.uk/tags/ title=Tags><span>Tags</span></a></li></ul></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>